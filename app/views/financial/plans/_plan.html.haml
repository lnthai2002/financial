:javascript
  $(document).ready(function(){
    $('[data-toggle-target]').click(function(e){
      var target = $(e.currentTarget).data('target');
      $(target).toggle();
    })
    $('[data-slide-target]').click(function(e){
      var target = $(e.currentTarget).data('target');
      $(target).find('.panel-body').slideToggle();
    })
  });

.container{:id=>"plan_#{plan.id}"}
  .col-xs-12.col-md-12
    .panel.panel-default
      .panel-heading{'display'=>'inline'}
        =plan.name
        =link_to('Amortization', plan, :class=>"btn btn-default")
        =link_to 'Detail', "#", :class=>"btn btn-default", 'data-toggle-target'=>"#plan_#{plan.id} tr.info"
        =link_to 'Collapse', "#", :class=>'btn btn-default', 'data-slide-target'=>"plan_#{plan.id}"
        =link_to 'Delete', plan, confirm: 'Are you sure?', method: :delete, :remote=>true, :class=>'close'
      .panel-body
        %table{:id=>"mortgage_#{plan.mortgage.id}"}
          %tbody
            %tr.js_info_hideable
              %th{:colspan=>2} Mortgage
            %tr.info.hidden
              %td Purchased price
              %td=number_to_currency(plan.mortgage.purchased_price)
            %tr.info.hidden
              %td Down payment
              %td=number_to_currency(plan.mortgage.down_payment)
            %tr.info.hidden
              %td Interest
              %td="#{number_with_precision(plan.mortgage.interest, :precision=>2)}%"
            %tr.info.hidden
              %td Loan term
              %td="#{plan.mortgage.loan_term} years"
            %tr.info.hidden
              %td Municipal tax
              %td=number_to_currency(plan.mortgage.municipal_tax)
            %tr.info.hidden
              %td School tax
              %td=number_to_currency(plan.mortgage.school_tax)
            %tr.info.hidden
              %td Heating cost
              %td=number_to_currency(plan.mortgage.heating)
            %tr.info.hidden
              %td House insurance
              %td=number_to_currency(plan.mortgage.house_insurance)
            %tr.info.hidden
              %td Mortgage insurance
              %td=number_to_currency(plan.mortgage.mortgage_insurance)
            %tr.info.hidden
              %td Revenue
              %td=number_to_currency(plan.mortgage.revenue)
            %tr.info.hidden
              %td Family expense
              %td=number_to_currency(plan.finance.net_monthly_expense)
            %tr.info.hidden
              %td Net income
              %td=number_to_currency(plan.finance.net_monthly_income)
            %tr
              %td Monthly mortgage payment
              %td=number_to_currency(plan.mortgage.monthly_mortgage_payment)
            %tr
              %td Monthly payment to bank, municipal, heating, insurance
              %td=number_to_currency(plan.mortgage.monthly_payment)
            %tr
              %td Net monthly payment after revenue
              %td=number_to_currency(plan.mortgage.net_monthly_payment)
            %tr
              %td Monthly saving after mortgage and family expense
              %td=number_to_currency(plan.monthly_saving)

        %table{:id=>"investment_#{plan.investment.id}"}
          %tr
            %th{:colspan=>2} Investment
          %tr.info.hidden
            %td Principal
            %td=number_to_currency(plan.investment.principal)
          %tr.info.hidden
            %td Rate
            %td="#{number_with_precision(plan.investment.rate, :precision=>2)}%"
          %tr.info.hidden
            %td Monthly deposit
            %td=number_to_currency(plan.investment.monthly_dep)
          %tr.info.hidden
            %td Length
            %td="#{plan.investment.months} months"
          %tr
            %td Value at maturity
            %td=number_to_currency(plan.investment.future_value)
          %tr
            %td{:colspan=>2}
              =render :partial=>'financial/investments/alt_investment_form', :locals=>{:investment=>plan.investment}