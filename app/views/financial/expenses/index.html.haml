- content_for :specific_view_js do
  %script{:src=>'https://www.google.com/jsapi', :type=>'text/javascript', :charset=>'utf-8'}

:javascript
  // Load the Visualization API and the piechart package.
  google.load('visualization', '1.0', {'packages':['corechart']});

  function drawSummaryChart() {
    var data = new google.visualization.arrayToDataTable(#{gc_table_for_summary(@payments['summary'])});
    var chart = new google.visualization.PieChart(document.getElementById('summary_chart'));
    chart.draw(data);
  }

  $(document).ready(function(){
    drawSummaryChart();
  });

.container
  #summary_chart

  .panel.panel-primary
    .panel-heading
      ="#{@payments["start_date"].strftime("%Y/%m/%d")} - #{@payments["end_date"].strftime("%Y/%m/%d")}"
      =link_to 'Add', new_expense_path, remote:true, class:'btn btn-success'
    .panel-body
      .col-xs-12.table-responsive
        %table.table.table-striped.table-condensed
          %thead
            %tr
              %th Date
              %th Amount
              %th Payee
              %th Category
              %th Note
          %tfoot
            %tr
              %th TOTAL
              %th= number_to_currency(@payments['total'])
              %th{'colspan'=>3} &nbsp;
          %tbody
            - @payments['list'].each do |e|
              %tr
                %td= e.pmt_date.strftime("%m/%d")
                %td= link_to number_to_currency(e.amount), edit_expense_path(e), remote:true
                %td= e.payee_payer
                %td= description_of_category(e.category_id)
                %td= link_to e.note, edit_expense_path(e), remote:true
